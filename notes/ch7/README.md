# ch7. 상태 관리

- 컴포넌트는 자신들의 상태(로컬 상태)를 가지며 이는 컴포넌트의 라이프사이클에 걸쳐 변하는 모든 데이터를 의미한다
- 로컬 상태는 컴포넌트를 반응적(reactive)으로 만들고, 컴포넌트의 렌더링에 영향을 미친다
- 리액트에서는 useState 훅으로 상태를 구현하고, useState 훅은 함수형 컴포넌트가 로컬 상태를 유지 및 업데이트할 수 있게 한다
- 컴포넌트의 로컬 상태가 변경되면 컴포넌트가 리렌더링되어 해당 변경을 반영한다

## 7-1. 컴포넌트간 데이터 관리하기

컴포넌트 간 데이터 흐름

- 데이터는 props를 통해 부모 컴포넌트 -> 자식 컴포넌트 방향으로 전달된다
  - 이러한 흐름을 하향식(top-down), 일방통행(unidirectional) 흐름이라고 한다
- 리액트에서 상향식 소통을 하려면 props로 전달한 콜백 함수를 활용한다
  - 자식 컴포넌트에서 콜백함수를 호출해 부모 컴포넌트에게 메시지를 보낼 수 있다

## 7-2. prop 내려보내기

- 출발부터 도착까지 컴포넌트 트리의 모든 컴포넌트에 props를 선언해야 하기 때문에 중간의 컴포넌트는 불필요한 props를 선언해야 할 수도 있다
- 이런 현상을 props drilling이라고 하는데, 이는 유지보수성을 저하시킨다
  - 모든 중간 컴포넌트의 props를 관리해야 하기 때문

### Context API

- 리액트의 Context API를 통해 props drilling을 해결할 수 있다
  - 컴포넌트 트리의 모든 컴포넌트에 props를 전달하지 않아도 데이터를 공유할 수 있다
- Context 객체를 만들고, Provider를 사용해서 중첩된 모든 컴포넌트 사이에서 그 데이터를 사용 가능하게 만들 수 있다
  - use 훅을 사용해서 해당 데이터에 접근하면 된다
    - use: React 19 버전에서 정식 도입되어 기존 useContext 훅을 대체
- 예시: src/context/message.ts 참조

## 7-3. 단순한 상태 관리

### useReducer

- useState 대신 useReducer 훅을 사용하여 로컬 상태를 관리할 수도 있다
- useState 와 마찬가지로 컴포넌트 안에 포함되거나 context를 사용해 공유될 수 있다
- useReducer 및 useState 훅은 상태를 직접 수정하는 대신, 새로운 상태 객체를 반환하여 상태 불변성을 보장할 수 있다
- 예시: src/reducers/emoji.reducer.ts 참조

## 7-4. 상태 관리 전용 라이브러리

- Redux(toolkit), Zustand 등

## 7-5. 마지막 고려사항

- 클라이언트 사이트 상태 관리가 불필요할 수 있다
  - 전역 상태 관리가 필요하다면 React 내장 Context API 만 활용해도 된다
- 데이터 페칭 라이브러리를 사용하여 서버 상태만 잘 관리한다면 클라이언트 상태 관리 라이브러리를 사용하지 않아도 될 수 있다
  - SWR, React Query 등
