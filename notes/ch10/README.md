# ch10. 개인화와 A/B 테스팅

사용자 경험 최적화를 위해 개인화와 A/B 테스팅을 고려할 수 있다

## 10-1. 개인화

개인화(personalization)

- 개인 사용자 혹은 그룹을 대상으로 그들의 선호도, 행동 혹은 다른 식별 가능한 속성에 기반해 맞춤 경험을 만드는 것
- 개인화가 유용하게 작용할 수 있는 애플리케이션의 영역을 식별해야 함
  - 어떤 부분을 다르게 보여줄 것인가?

사용자 데이터

- 사용자 선호도: 언어, 시스템 테마(라이트 or 다크), 행동, 위치 등
- 사용자 프로파일링, 행동 추적, 피드백 수집으로 사용자 데이터를 얻을 수 있음
- 사용자 정보는 DB에 저장되고, React 앱에서 DB에 저장된 사용자 정보를 쿼리
- 예시: 사용자 화면 모드(컬러 스킴)를 감지해서 Context에 보관해서 전역에서 사용할 수 있게 하기
  - src/contexts/colorScheme/ColorSchemeProvider.tsx 참조

## 10-2. A/B 테스팅

2개 버전 이상의 웹페이지, 기능, 제품을 서로 비교해서 성능이 좋은 쪽을 결정하는 방법

- 성능: 클릭률(CTR), 전환율 등

### A/B 테스트 핵심 단계

사용자 나누기

- 애플리케이션의 사용자를 구분된 그룹으로 나누고 각 사용자가 테스트 대상 기능의 여러 버전 중 한 버전만 보도록 해야 함

다른 버전 제공하기

- 검증이 필요한 기능 혹은 컴포넌트의 다른 버전을 만든다
- 조건부 렌더링으로 각 사용자 세그먼트에 적절한 변형 제공

데이터 수집

- 각 버전에 대한 사용자 상호작용, 전환 등의 지표를 수집하고 분석을 위해 저장

실험 결과 분석

- 어떤 버전에서 최고의 결과를 얻었는지 분석

### 버튼 색상 테스트 설계

- Statsig 도구 활용 (이외에도 Optimizely, Launchdakly 등 도구 있음)

가정

- 특정 버튼의 색깔을 blue -> green 변경하면 CTR이 증가할 것이다

목적

- 어떤 버튼 색상이 더 높은 CTR로 연결되는지 결정한다

설정

- blue, green 2가지 버전의 버튼을 만든다
- 각각 사용자 50%에게 제공

데이터 수집

- Statsig의 내장 이벤트 추적 기능을 사용해 2가지 버전의 CTR 수집

분석

- 두 버전의 CTR 비교

### 테스트 진행

Statsig 웹에서 실험 그룹 만들기

- 통제 그룹: (기존) blue 버튼을 보는 50% 사용자
- 테스트 그룹: (새로운) green 버튼을 보는 50% 사용자

실험

- React 앱에서 statsig client를 셋업하고, 실험 이름으로 실험에서 세운 parameter(enable_feature)를 받음
- enable_feature는 boolean으로 일단 설정되어 있고, unique user를 50%씩 나눠 할당
  - 크롬 시크릿 탭으로 접근하면 다르게 할당됨(green, blue)
- 버튼 클릭 시 결과를 log하고 statsig로 전송
- 참고: large-scale-react/src/pages/AbTestPage.tsx

## 10-3. 기능 플래그

- 새로운 UI나 기능을 모든 사용자에게 출시하고 싶지는 않을 때 기능 플래그를 사용할 수 있다

기능 플래그(feature flag)

- feature gate, beta flag 라고도 함
- 애플리케이션의 새로운 기능 출시 및 통제를 관리하는 방법 제공
- 스위치처럼 특정 기능을 켜겨나 끌 수 있다
- 실시간으로 사용자가 어떤 경험을 할지 세세하게 제어할 수 있다

기능 플래그를 고려할 때

- 위험 완화하기: 기능을 일부 사용자에게만 배포하여 잠재적인 버그 혹은 이슈를 식별
- 인프라 부하 테스트: 새로운 기능을 제한적으로 오픈하여 서버 부하 테스트
- 사용자 피드백 수집: 새로운 기능을 적은 규모의 사용자에게 먼저 출시해 피드백을 수집
- 시장 테스트: 특정 지역이나 인구통계에 기반한 세그먼트가 새로운 기능을 어떻게 받아들이는지 테스트
- 롤백 계획 보장: 롤백이 필요할 때 전체 사용자의 혼란을 줄일 수 있다

기능 플래그 예시

- 신제품 또는 변경된 UI 가 있을 경우 10% -> 25% -> 50% -> 100% 로 사용자 집단 늘리기
- 이슈가 발생하면 해당 기능을 0%로 롤백 후 이슈 대응 완료 후 다시 공개
- 특정 브라우저, 운영체제, 디바이스를 대상으로 기능 플래그 사용

기능 플래그 시작하기

- Statsig 사이트 > Feature Management > Feature Gates 선택
- 생성 후 rule 에 특정 기준을 만족하는 (예: 전체 웹) 사용자 중 몇 퍼센트에게 true value, else 에게는 false value를 반환
- useGateValue 훅 으로 value 확인 가능
